<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>uploader文档说明</title>
<script src="../highlight/shCore.js"></script>
<link rel="stylesheet" href="../style/avalon.doc.css"/>
</head>
<body>
	<div class="wrapper">
		<h2>uploader</h2>
		<fieldset>
			<legend>uploader上传组件</legend>
			<p>文件上传组件。目前只能上传图片，且功能较为简单。兼容至ie6。</p>
			<p>目前具备的功能有：多图片选择，图片预览，图片压缩（基于宽高），跨域等。</p>
		</fieldset>
		<fieldset>
			<legend>使用说明</legend>
			<table class="table-doc">
				<tr>
					<th>名字</th><th nowrap >默认值</th><th>说明</th>
				</tr>
				<tr>
					<td colspan="3" align="center">配置参数</td>
				</tr>
				<tr>  
					<td>action</td><td>无默认值</td><td>上传目标页面（必须配置）</td> 
				</tr>
				<tr>  
					<td>browseButton</td><td>无默认值</td><td>上传按钮id
					（必须配置）。上传按钮必须为非自闭合标签，button标签也是不允许的。</td> 
				</tr>
				<tr>  
					<td>maxFileSize</td><td>1048576 (1MB)</td><td>单个文件最大大小</td> 
				</tr>
				<tr>  
					<td>maxFileCount</td><td>100</td><td>最大文件数目</td> 
				</tr>
				<tr>  
					<td>imgMaxWidth</td><td>10000</td><td>图片最大宽度。超过此设置图片将被压缩至此宽度。</td> 
				</tr>
				<tr>  
					<td>imgMaxHeight</td><td>10000</td><td>图片最大高度。超过此设置图片将被压缩至此高度。</td> 
				</tr>
				<tr>
					<td colspan="3" align="center">回调函数</td>
				</tr>
				<tr>  
					<td>onSuccess(files)</td><td></td><td>上传成功时触发。files：上传成功的文件数组。</td> 
				</tr>
				<tr>  
					<td>onFileSizeErr(filename)</td><td></td><td>单个文件大小超出设置时触发。fileName：文件名。</td> 
				</tr>
				<tr>  
					<td>onFileCountErr(availableNum, selectNum)</td><td></td><td>文件数目超出设置时触发。availableNum：剩余可选数量；selectNum：此次选择数量。</td> 
				</tr>
				<tr>  
					<td>onSingleFailed(fileName)</td><td></td><td>单个文件失败时触发。fileName：文件名。</td> 
				</tr>
				<tr>
					<td colspan="3" align="center">暴露参数</td>
				</tr>
				<tr>  
					<td>files</td><td></td><td>数组。数组成员：存放已上传文件对象。文件对象包括name，src，id等属性。</td> 
				</tr>
				<tr>
					<td colspan="3" align="center">暴露方法</td>
				</tr>
				<tr>  
					<td>removeFile($index)</td><td></td><td>在files的循环中使用，用来绑定玩文件删除操作。</td> 
				</tr>
			</table>
		</fieldset>
		<fieldset>
			<legend>服务端接口说明</legend>
			<p>服务端返回数据格式</p>
			<pre class="brush:html;gutter:false;">
{
	"ret": 0,
	"errcode": 0,
	"errmsg": "success",
	"ver": 1,
	"data": {
		"images": [{
			"url": ".\/_file\/5428119d379a3",
			"id": "5428119d379a3"
		}]
	}
}
                </pre>
                <p>服务端程序可参考post.php</p>
            </fieldset>
            <fieldset>
                <legend>计划</legend>
                <ul>
                    <li>关于服务端的说明还不够细致，包括逻辑，出错情况处理，返回数据结构等诸多细节需要在实际使用才会决定，而现在缺少这部分经验。</li>
                </ul>
            </fieldset>
            <fieldset>
                <legend>示例</legend>
                <p>因为需要服务程序，请自行配制php环境，然后下载源码运行本示例。</p>
                <ul class="example-links">
                    <li><a href="avalon.uploader.ex.html">例子</a></li>
                </ul>
            </fieldset>
        </div>
    </body>
</html>